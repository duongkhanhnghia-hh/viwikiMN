<div class="portlet box green">
	<div class="portlet-title">
		<div class="caption">
			<i class="fa fa-comments"></i>Striped Table </div>
			<div class="tools">
				<a href="javascript:;" onclick="detailroles()"> 
				<i class="fa fa-comments" style="color: white"></i>
				</a>
			</div>
		</div>
		<div class="portlet-body" style="display: block;min-height: 500px;">
			<div class="table-scrollable" style="min-height: 500px">
				<table class="table table-striped table-hover" >
					<thead>
						<tr>
							<th> # </th>
							<th> id </th>
							<th> Email </th>
							<th> Roles </th>
						</tr>
					</thead>
					<tbody>
						<% count = 1  %>
						<% @user_pq.each do |user| %>
							<tr>
								<td> <%= count %> </td>
								<td> <%= user.id %> </td>
								<td> <%= user.email %> </td>
								<td>	
									<% if count < @users.length/2 + 1 %>
									<div class="btn-group">
										<button class="btn blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> 
											<span id=<%=user.id%>><%= user.roles[0].name %></span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul class="dropdown-menu" role="menu">
											<li onclick="choose(<%=user.id%>,'Admin')">
												<a href="javascript:;"> Admin </a>
											</li>
											<li class="dropdown-submenu">
												<a href="javascript:;"> Editor </a>
												<ul class="dropdown-menu" style="max-height: 1000px; z-index: 6;">
													<% @roles.each do |role| %>
														<% if role.resource_id !=nil %>
															<li >
																<a href="javascript:;"> 
																<% if user.roles.exists?(:id => role.id) %>
																<%= check_box("post", "editor",{checked: true}) %> 
																<% else %>
																<span onclick="choose(<%=user.id%>,<%=role.id%>)" style="display:inline">
																	<%= check_box("post", "editor",{checked: false}) %> </span> 
																<% end %>
																	<%= @categories.find(role.resource_id).name %>
																</a>
															</li>
														<% end %>
													<% end %>
													<div class="spacer"></div>
												</ul>
											</li>
											<li onclick="choose(<%=user.id%>, 'User')">
												<a href="javascript:;"> User </a>
											</li>
											<li onclick="choose(<%=user.id%>, 'None')">
												<a href="javascript:;"> None </a>
											</li>
											
										</ul>
									</div>
									<% else %>
									<div class="btn-group dropup">
										<button class="btn blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> 
											<span id=<%=user.id%>><%= user.roles[0].name %></span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul class="dropdown-menu" role="menu">
											<li onclick="choose(<%=user.id%>, 'Admin')">
												<a href="javascript:;"> Admin </a>
											</li>
											<li class="dropdown-submenu">
												<a href="javascript:;"> Editor </a>
												<ul class="dropdown-menu" style="max-height: 1000px; z-index: 6;">
													<% @roles.each do |role| %>
													<li >
														<a href="javascript:;"> 
														<% if user.roles.exists?(:id => role.id) %>
														<%= check_box("post", "editor",{checked: true}) %> 
														<% else %>
														<span onclick="choose(<%=user.id%>,<%=role.id%>)" style="display:inline">
																	<%= check_box("post", "editor",{checked: false}) %> </span> 
														<% end %>
														<%= @categories.find(role.resource_id).name %>
														</a>
													</li>
													<% end %>
													<div class="spacer"></div>
												</ul>
											</li>
											<li onclick="choose(<%=user.id%>, 'User')">
												<a href="javascript:;"> User </a>
											</li>
											<li onclick="choose(<%=user.id%>, 'None')">
												<a href="javascript:;"> None </a>
											</li>
										</ul>
									</div>
									<% end %>
								</td>
							</tr>
							<% count += 1 %>
						<% end %>
						<% @user_npq.each do |user| %>
							<tr>
								<td> <%= count %> </td>
								<td> <%= user.id %> </td>
								<td width="40%"> <%= user.email %> </td>
								<td >	
									<% if count < @users.length/2 + 1 %>
									<div class="btn-group">
										<button class="btn blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> 
											<span id=<%=user.id%>>None</span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul class="dropdown-menu" role="menu">
											<li onclick="choose(<%=user.id%>, 'Admin')">
												<a href="javascript:;"> Admin </a>
											</li>
											<li class="dropdown-submenu">
												<a href="javascript:;"> Editor </a>
												<ul class="dropdown-menu" style="max-height: 1000px; z-index: 6;">
													<% @roles.each do |role| %>
														<% if role.resource_id !=nil %>
															<li >
																<a href="javascript:;"> 
																<% if user.roles.exists?(:id => role.id) %>
																<%= check_box("post", "editor",{checked: true}) %> 
																<% else %>
																<span onclick="choose(<%=user.id%>,<%=role.id%>)" style="display:inline">
																	<%= check_box("post", "editor",{checked: false}) %> </span> 
																<% end %>
																	<%= @categories.find(role.resource_id).name %>
																</a>
															</li>
														<% end %>
													<% end %>
													<div class="spacer"></div>
												</ul>
											</li>
											<li onclick="choose(<%=user.id%>, 'User')">
												<a href="javascript:;"> User </a>
											</li>
											<li onclick="choose(<%=user.id%>, 'None')">
												<a href="javascript:;"> None </a>
											</li>
										</ul>
									</div>
									<% else %>
									<div class="btn-group dropup">
										<button class="btn blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> 
											<span id=<%=user.id%>>None</span>
											<i class="fa fa-angle-down"></i>
										</button>
										<ul class="dropdown-menu" role="menu">
											<li onclick="choose(<%=user.id%>, 'Admin')">
												<a href="javascript:;"> Admin </a>
											</li>
											<li class="dropdown-submenu">
												<a href="javascript:;"> Editor </a>
												<ul class="dropdown-menu" style="max-height: 1000px; z-index: 6;">
													<% @roles.each do |role| %>
														<% if role.resource_id !=nil %>
															<li >
																<a href="javascript:;"> 
																<% if user.roles.exists?(:id => role.id) %>
																<%= check_box("post", "editor",{checked: true}) %> 
																<% else %>
																<span onclick="choose(<%=user.id%>,<%=role.id%>)" style="display:inline">
																	<%= check_box("post", "editor",{checked: false}) %> </span> 
																<% end %>
																	<%= @categories.find(role.resource_id).name %>
																</a>
															</li>
														<% end %>
													<% end %>
													<div class="spacer"></div>
												</ul>
											</li>
											<li onclick="choose(<%=user.id%>, 'User')">
												<a href="javascript:;"> User </a>
											</li>
											<li onclick="choose(<%=user.id%>, 'None')">
												<a href="javascript:;"> None </a>
											</li>
										</ul>
									</div>
									<% end %>
								</td>
							</tr>
							<% count += 1 %>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
